<!-- Overview -->
<viewer-overview *ngIf="viewState === 'initial'" [learningObjective]="learningObjective"
  [complexityLevel]="complexityLevel" [duration]="duration" [timeLimit]="getTimeLimit"
  [primaryCategory]="primaryCategory" [canAttempt]="canAttempt" [noOfQuestions]="noOfQuestions"
  (userSelection)="getSections($event)" [coursePrimaryCategory]="coursePrimaryCategory"
  [instructionAssessment]="instructionAssessment"
  [selectedAssessmentCompatibilityLevel]="selectedAssessmentCompatibilityLevel">
</viewer-overview>

<!-- Overlay Loader -->
<div class="calculate-overlay" *ngIf="showOverlay">
  <div class="overlay">
    <div>
      <mat-spinner [diameter]="150"></mat-spinner>
    </div>
    <div>
      <span class="mat-heading" i18n>{{'playerbrief.calculateResult' | translate}}</span>
    </div>
  </div>

</div>
<!-- Course Assessment-->
<ng-container *ngIf="coursePrimaryCategory !== 'Standalone Assessment' && selectedAssessmentCompatibilityLevel < 6">
  <!-- Desktop Not Standalone Assessment -->
  <div #quizContainer class="quiz-container"
    *ngIf="viewState !== 'initial' && !isMobile && fetchingQuestionsStatus === 'done'">
    <div class="flex flex-row margin-m"
    *ngIf="fetchingQuestionsStatus === 'done' && viewState !== 'detail' && !(viewState === 'answer') && !isSubmitted">
    <div class="left-container">
      <div class="flex flex-row justify-between align-center assessment-header">
        <div>
          <div (click)="back()" class="no-border flex cursor-pointer back_button">
            <span class="subheading-back">{{resourceName}}</span>
          </div>
        </div>
        <div>
          <div class="flex flex-1 flex-row-reverse butto_box end">
            <ng-container
              *ngIf="!allSecAttempted.full && allSecAttempted.next && ((currentQuestionIndex+1) === totalQCount)">
              <button class="text-white ws-mat-primary-background margin-xs quest_btn" mat-raised-button
                (click)="nextSection(allSecAttempted.next)" i18n="button quiz submit">
                {{ 'practiceoverview.nextSection' | translate }}
              </button>
            </ng-container>
            <a *ngIf="(currentQuestionIndex+1) !== totalQCount"
              class="text-white ws-mat-primary-background margin-xs quest_btn" mat-button
              (click)="getNextQuestion(currentQuestionIndex + 1)">
              <ng-container *ngIf="!isXsmall">{{ 'playerbrief.next' | translate }}</ng-container>
            </a>
            &nbsp;&nbsp;
            <a *ngIf="(currentQuestionIndex + 1) === totalQCount"
              class="text-white ws-mat-primary-background margin-xs quest_btn" mat-button (click)="proceedToSubmit()">
              <ng-container *ngIf="!isXsmall">{{ 'playerbrief.submit' | translate }}</ng-container>
            </a>
            &nbsp;&nbsp;
            <a *ngIf="currentQuestionIndex !== 0" class="ws-mat-accent-border margin-xs quest_btn prev" mat-button
              (click)="getNextQuestion(currentQuestionIndex - 1)">
              <ng-container *ngIf="!isXsmall">{{ 'playerbrief.previous' | translate }}</ng-container>
            </a>

            <!-- <button class="text-white ws-mat-primary-background" mat-raised-button i18n="button quiz submit"
              (click)="proceedToSubmit()">
              Finish assessment
            </button> -->
          </div>
        </div>
      </div>

      <div class="border-outline">
        <div class="flex flex-1">
          <mat-progress-bar class="quiz-progress" [color]="secondary" [mode]="determinate"
            [value]="((currentQuestionIndex + 1)/totalQCount)*100" [bufferValue]="100">
          </mat-progress-bar>
        </div>
        <ng-container *ngIf="current_Question && !process">
          <viewer-question #questionsReference [id]="'question' + (currentQuestionIndex + 1)"
            [markedQuestions]="markedQuestions" [artifactUrl]="artifactUrl" [questionNumber]="currentQuestionIndex + 1"
            [total]="secQuestions.length" [viewState]="viewState" [question]="current_Question"
            [itemSelectedList]="questionAnswerHash[(current_Question?.questionId)]" [primaryCategory]="primaryCategory"
            [ePrimaryCategory]="ePrimaryCategory"
            [totalQCount]="totalQCount"
            (itemSelected)="fillSelectedItems(current_Question, $event)"
            [showAnswer]="showAnswer"
            [currentQuestion]="current_Question"
            >
          </viewer-question>
        </ng-container>
        <div class="flex flex-1">
          <!-- <ng-container
            *ngIf="ePrimaryCategory.PRACTICE_RESOURCE === primaryCategory && ((currentQuestionIndex+1) <= totalQCount)">
            <button *ngIf="!showAnswer" class="text-white ws-mat-primary-background margin-xs quest_btn"
              mat-raised-button (click)="checkAns(currentQuestionIndex + 1)" i18n="button quiz correct answer">
              Check Answer
            </button>
          </ng-container> -->
          <div class="flex flex-1 flex-row-reverse margin-right-m butto_box end">
            <ng-container
              *ngIf="!allSecAttempted.full && allSecAttempted.next && ((currentQuestionIndex+1) === totalQCount)">
              <button class="text-white ws-mat-primary-background margin-xs quest_btn" mat-raised-button
                (click)="nextSection(allSecAttempted.next)" i18n="button quiz submit">
                {{ 'practiceoverview.nextSection' | translate }}
              </button>
            </ng-container>
          </div>
        </div>
        <ng-template *ngIf="!(current_Question && !process)" [ngTemplateOutlet]="showLoading"></ng-template>
      </div>

    </div>
    <div class="right-container">
      <div class="question-list">
        <div class="ques_stats_container">
          <div class="flex flex-row justify-between ques_stats_container_box">
            <div class="flex flex-row">
                <div>
                  <p class="mat-subheading-1">
                    {{ 'playerbrief.questions' | translate | titlecase}}
                  </p>
                </div>
                <div class="question-info">
                  <img src="assets/icons/final-assessment/question_info.svg"/>
                </div>
                <div class="info-hover">
                  <div class="info-tooltip-container">
                      <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/blue-check-box.svg"><span>{{ 'playerbrief.answered' | translate }}</span></div>
                      <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/not-answered-checkbox.svg"><span>{{ 'playerbrief.notAnswered' | translate }}</span></div>
                      <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/flag-check-box.svg"><span>{{ 'playerbrief.flagged' | translate }}</span></div>
                  </div>
                </div>
            </div>
            
            <div class="timer" *ngIf="primaryCategory !== ePrimaryCategory.PRACTICE_RESOURCE">
              <mat-chip-list><mat-chip class="light-blue"><span class="chip-text">
                  <!-- <ng-container [ngTemplateOutlet]="timer"></ng-container> -->
                  <div *ngIf="timeLeft" class="flex flex-1 flex-center">
                    <img src="assets/icons/final-assessment/timer.svg">
                    &nbsp;&nbsp; 
                    
                    <ng-container *ngIf="quizJson.timeLimit >= 3600">
                      
                      <div *ngIf="timeLeft > 120">
                        <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2H' }}</span>
                      </div>
                      <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                        <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2H' }}</span>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="quizJson.timeLimit < 3600">
                      <div *ngIf="timeLeft > 120">
                        <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2M' }}</span>
                      </div>
                      <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                        <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2M' }}</span>
                      </div>
                    </ng-container>
                
                    <div *ngIf="isSubmitted" class="margin-left-xs mat-body-strong" i18n>
                      <span class="time-title ws-mat-default-text"> (Submitted)</span>
                    </div>
                  </div>
                </span>
              </mat-chip></mat-chip-list>
            </div>
          </div>
          <div class="seperator"></div>
          <div class="mb-24">
            <div class="flex flex-row justify-around">
              <div class="flex flex-col align-center">
                <div class="ques-count">{{totalQCount - questionAttemptedCount}}</div>
                <div class="stats-label">{{ 'playerbrief.notAnswered' | translate }}</div>
              </div>
              <div class="flex flex-col align-center">
                <div class="ques-count">{{questionAttemptedCount ? questionAttemptedCount  : 0}}</div>
                <div class="stats-label">{{ 'playerbrief.answered' | translate }}</div>
              </div>
              <!-- <div class="flex flex-col align-center">
                <div class="ques-count">{{markedQuestions.size}}</div>
                <div class="stats-label">Skipped</div>
              </div> -->
            </div>
          </div>
          <div class="seperate-text">
            <span>{{ 'practiceoverview.questions' | translate | titlecase}}</span>
          </div>
          <!-- <div class="flex flex-row justify-between">

            <div class="flex flex-row center-text">
              <div class="answer-stats-label">Answered&nbsp;</div>
              <div><mat-chip-list><mat-chip class="light-blue-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></mat-chip-list>
              </div>
            </div>
            <div class="flex flex-row center-text answer-stats-label">
              Not Answered &nbsp;<mat-checkbox class="example-margin"></mat-checkbox>
            </div>
            <div class="flex flex-row center-text">
              <div class="answer-stats-label">Skipped&nbsp;</div>
              <div><mat-chip class="orange-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></div>
            </div>
          </div> -->
        </div>
        <!-- <div class="seperator"></div> -->

        <!-- 
           'white-border':
                  !isQuestionMarked(question?.questionId) &&
                  !isQuestionAttempted(question?.questionId) &&
                  currentTheme === 'black-theme',
                'dark-border':
                  !isQuestionMarked(question?.questionId) &&
                  !isQuestionAttempted(question?.questionId) &&
                  currentTheme !== 'black-theme'
        -->
        <div *ngIf="!isSubmitted && !isXsmall && viewState === 'attempt'" class="flex flex-1 question-box-auto-height">
          <ng-template *ngIf="fetchingQuestionsStatus === 'fetching'" [ngTemplateOutlet]="showLoading"></ng-template>
          <div class="flex flex-wrap margin-right-s margin-left-s quest_num_box quest_num_box"
            *ngIf="fetchingQuestionsStatus === 'done'">
            <div class="col question-list-item" *ngFor="let question of secQuestions; let i = index">
              <div (click)="scroll(i + 1)" [ngClass]="{
                'marked-question': isQuestionMarked(question?.questionId),
                'attempted-question':
                  !isQuestionMarked(question?.questionId) &&
                  isQuestionAttempted(question?.questionId)               
              }" class="margin-side-8">
                <div *ngIf="!isQuestionMarked(question?.questionId) &&
                  isQuestionAttempted(question?.questionId)"  class="light-blue-small" [ngClass]="(currentQuestionIndex + 1) === i+1 ? 'current-question': 'dark-border'">
                  <img class="margin-center" src="assets/icons/final-assessment/correct_arrow.svg"/>
                </div>
                <div *ngIf="isQuestionMarked(question?.questionId) && !(!isQuestionMarked(question?.questionId) &&
                  isQuestionAttempted(question?.questionId))">                  
                  <mat-chip-list class="question-flag">
                    <mat-chip class="orange-small">
                      <ng-container *ngIf="!isQuestionAttempted(question?.questionId)">{{ i + 1 }}</ng-container>
                      <ng-container *ngIf="isQuestionAttempted(question?.questionId)"><img class="margin-center" src="assets/icons/final-assessment/correct_arrow.svg"/></ng-container>
                    </mat-chip>
                  </mat-chip-list>
                </div>
                <div *ngIf="!(!isQuestionMarked(question?.questionId) &&
                  isQuestionAttempted(question?.questionId)) && (!isQuestionMarked(question?.questionId))"
                  class="ovel question-number" [ngClass]="(currentQuestionIndex + 1) === i+1 ? 'current-question': 'dark-border'"><span [ngClass]="(currentQuestionIndex + 1) === i+1 ? 'mat-body-2-bold': 'mat-body-2'">
                    {{ i + 1 }}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="final-submit" *ngIf="(currentQuestionIndex + 1) === totalQCount" (click)="proceedToSubmit()">
           <div class="final-submit-cta">
              <img src="assets/icons/final-assessment/correct_arrow.svg"> <span class="cta-label">{{ 'practiceoverview.finishAssessment' | translate }}</span>
           </div>
        </div> -->
      </div>
    </div>
  </div>
  <!-- 
    <div *ngIf="!isSubmitted && !isXsmall && viewState === 'attempt'" class="flex flex-1">
      <ng-template *ngIf="fetchingQuestionsStatus === 'fetching'" [ngTemplateOutlet]="showLoading"></ng-template>
      <div class="flex flex-nowrap margin-right-s margin-left-s quest_num_box"
        *ngIf="fetchingQuestionsStatus === 'done'">
        <div class="col" *ngFor="let question of secQuestions; let i = index">
          <div (click)="scroll(i + 1)" [ngClass]="{
          'marked-question': isQuestionMarked(question?.questionId),
          'attempted-question':
            !isQuestionMarked(question?.questionId) &&
            isQuestionAttempted(question?.questionId),
          'white-border':
            !isQuestionMarked(question?.questionId) &&
            !isQuestionAttempted(question?.questionId) &&
            currentTheme === 'black-theme',
          'dark-border':
            !isQuestionMarked(question?.questionId) &&
            !isQuestionAttempted(question?.questionId) &&
            currentTheme !== 'black-theme'
        }" class="margin-xs ovel">
            <div class="question-number"><span class="mat-body-2">{{ i + 1 }}</span></div>
          </div>
        </div>
      </div>
    </div>
    <mat-card class="flex flex-1 flex-column margin-m pad-0 quest_mat_card"
      *ngIf="fetchingQuestionsStatus === 'done' && viewState !== 'detail' && !(viewState === 'answer') && !isSubmitted">
      <ng-container *ngIf="true">

      </ng-container>
    </mat-card> -->



  <!-- <ng-container *ngIf="fetchingQuestionsStatus === 'done'  && current_Question && !process">
      <ng-container *ngIf="viewState === 'attempt' && !isSubmitted">
        <div class="flex flex-1 flex-column margin-top-l margin-left-xs bottom_box margin-bottom-xs">
          <div class="flex flex-start margin-left-m  cen">
            <mat-icon class="flex margin-top-xs margin-bottom-xs">warning</mat-icon>
            <span class="flex mat-body-2 padding-xs font-weight-700" i18n>Instructions </span>
            <span class="flex mat-body-2 font-weight-700" i18n>:</span>
            <span [innerHtml]="formate(selectedSection.additionalInstructions)"></span>
          </div>
          <div class="flex flex-start margin-left-m  cen">
            <mat-icon class="flex margin-top-xs margin-bottom-xs">info_outline</mat-icon>
            <span class="flex mat-body-2 padding-xs" i18n>Attempt all questions to finish assessment</span>
          </div>          
        </div>
      </ng-container>
    </ng-container> -->

    <div id="quiz-end"></div>
    <ng-container *ngIf="isSubmitted && (viewState === 'answer' || viewState === 'review')">
      <viewer-result [quizCategory]="primaryCategory" [quizResponse]="finalResponse" [percentage]="result"
        [isPassed]="finalResponse?.pass" (userSelection)="action($event)" (fetchResult)="getQuizResult()">
      </viewer-result>
    </ng-container>
    <!-- </div> -->
    <div *ngIf="viewState === 'detail'" class="flex flex-1 flex-column">
      <ng-container *ngIf="this.paperSections && this.paperSections?.length > 0">
        <div class="flex flex-1 flex-column margin-right-m margin-left-m main_practice_box">
          <div class="margin-m" *ngIf="fetchingSectionsStatus === 'fetching'">
            <div class="flex flex-center">
              <mat-spinner></mat-spinner>
            </div>
          </div>
          <div class="flex flex-1 flex-wrap margin-top-l">
            <ng-container *ngFor="let section of this.paperSections">
              <mat-card [ngClass]="getClass(section)"
                class="min-w assessment_card ws-mat-accent-border br-8 no-border margin-m">
                <mat-card-content class="cursor-pointer"
                  [class.spinner]="fetchingQuestionsStatus === 'fetching' && section.identifier === selectedSection.identifier"
                  [attr.disabled]="fetchingQuestionsStatus === 'fetching' && section.identifier === selectedSection.identifier"
                  (click)="startSection(section)">
                  <div class="flex flex-1 flex-column">
                    <span class="flex mat-subheading-1 text-truncate ">{{section.name || 'Section'}}</span>
                    <span class="flex mat-body-2">Percentage to pass - <ng-container>
                        {{section.minimumPassPercentage}}
                      </ng-container></span>
                    <span class="flex mat-body-2">Total questions - <ng-container>{{section?.maxQuestions ||
                        '0'}}
                      </ng-container></span>
                    <span [innerHtml]="formate(section.additionalInstructions)"></span>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <!-- Mobile -->

  <div #quizContainer class="quiz-container"
    *ngIf="viewState !== 'initial' && isMobile && fetchingQuestionsStatus === 'done'">
    <div class="flex flex-column" *ngIf="!isSubmitted">
      <div>
        <div class="flex flex-row justify-around align-end mobile-question-header">
          <div (click)="back()">
            <img class="vertical-middle cursor-pointer" src="assets/icons/final-assessment/mobile-cross.svg" />
          </div>
          <div class="no-border flex cursor-pointer back_button">
            <span class="subheading-back">{{resourceName}}</span>

          </div>
          <div class="timer" *ngIf="primaryCategory !== ePrimaryCategory.PRACTICE_RESOURCE">
            <mat-chip-list><mat-chip class="light-blue"><span class="chip-text">
                  <div *ngIf="timeLeft" class="flex flex-1 flex-center">
                    <img src="assets/icons/final-assessment/timer.svg">
                    &nbsp;&nbsp;

                    <ng-container *ngIf="quizJson.timeLimit >= 3600">

                      <div *ngIf="timeLeft > 120">
                        <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2H'
                          }}</span>
                      </div>
                      <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                        <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2H' }}</span>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="quizJson.timeLimit < 3600">
                      <div *ngIf="timeLeft > 120">
                        <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2M'
                          }}</span>
                      </div>
                      <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                        <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2M' }}</span>
                      </div>
                    </ng-container>

                    <div *ngIf="isSubmitted" class="margin-left-xs mat-body-strong" i18n>
                      <span class="time-title ws-mat-default-text"> (Submitted)</span>
                    </div>
                  </div>
                </span>
              </mat-chip></mat-chip-list>
          </div>
        </div>
        <div class="flex flex-column justify-between align-center assessment-header">
          <div class="question-list-mweb mb-10">
            <div class="ques_stats_container">
              <div class="flex flex-row justify-between ques_stats_container_box">
                <div class="flex flex-row">
                  <div>
                    <p class="mat-subheading-1 questions">
                      {{ 'playerbrief.questions' | translate | titlecase}}
                    </p>
                  </div>
                </div>

                <div class="timer" *ngIf="primaryCategory !== ePrimaryCategory.PRACTICE_RESOURCE">
                  <mat-chip-list><mat-chip class="light-blue"><span class="chip-text">
                        <div *ngIf="timeLeft" class="flex flex-1 flex-center">
                          <img src="assets/icons/final-assessment/timer.svg">
                          &nbsp;&nbsp;

                          <ng-container *ngIf="quizJson.timeLimit >= 3600">

                            <div *ngIf="timeLeft > 120">
                              <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2H'
                                }}</span>
                            </div>
                            <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                              <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2H'
                                }}</span>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="quizJson.timeLimit < 3600">
                            <div *ngIf="timeLeft > 120">
                              <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2M'
                                }}</span>
                            </div>
                            <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                              <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2M'
                                }}</span>
                            </div>
                          </ng-container>

                          <div *ngIf="isSubmitted" class="margin-left-xs mat-body-strong" i18n>
                            <span class="time-title ws-mat-default-text"> (Submitted)</span>
                          </div>
                        </div>
                      </span>
                    </mat-chip></mat-chip-list>
                </div>
              </div>
              <div class="mb-24 mt-4">
                <div class="flex flex-row gap-10">
                  <div class="flex flex-col align-center">
                    <div class="ques-count">{{totalQuestionsCount - questionAttemptedCount}}</div>
                    <div class="stats-label">{{ 'playerbrief.notAnswered' | translate }}</div>
                  </div>
                  <div class="flex flex-col align-center">
                    <div class="ques-count">{{questionAttemptedCount ? questionAttemptedCount : 0}}</div>
                    <div class="stats-label">{{ 'playerbrief.answered' | translate }}</div>
                  </div>
                </div>
              </div>
              <div class="seperate-text">
                <span>{{ 'practiceoverview.questions' | translate | titlecase}}</span>
              </div>
            </div>
            <!-- <div class="ques_stats_container">            
                <div class="mb-24">
                  <div class="flex flex-row justify-around">
                    <div class="flex flex-col align-center">
                      <div class="ques-count">{{totalQCount - questionAttemptedCount}}</div>
                      <div class="stats-label">{{'playerbrief.notAnswered' | translate}}</div>
                    </div>
                    <div class="flex flex-col align-center">
                      <div class="ques-count">{{questionAttemptedCount ? questionAttemptedCount  : 0}}</div>
                      <div class="stats-label">{{'playerbrief.answered' | translate}}</div>
                    </div> -->
            <!-- <div class="flex flex-col align-center">
                      <div class="ques-count">{{markedQuestions.size}}</div>
                      <div class="stats-label">Skipped</div>
                    </div> -->
            <!-- </div>
                </div>
                <div class="outer-border-box" id="toolTipSection">
                  <div class="label-source-box">
                    <span class="box-title">{{'playerbrief.questions' | translate | titlecase}} 
                      <img (click)="showToolTip=!showToolTip" class="question-info"  src="assets/icons/final-assessment/question_info.svg"/>
                    </span>               
                    <div class="info-hover" id="infoToolTip" *ngIf="showToolTip">
                      <div class="info-tooltip-container">
                          <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/blue-check-box.svg"><span>{{'playerbrief.answered' | translate}}</span></div>
                          <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/not-answered-checkbox.svg"><span>{{'playerbrief.notAnswered' | translate}}</span></div>
                          <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/flag-check-box.svg"><span>{{'playerbrief.flagged' | translate}}</span></div>
                      </div>
                    </div>   
                  </div>
                </div> -->
            <!-- <div class="seperate-text" id="toolTipSection">
                  <span>{{'playerbrief.questions' | translate | titlecase}}</span>
                  <span>
                  <img (click)="showToolTip=!showToolTip" class="question-info"  src="assets/icons/final-assessment/question_info.svg"/>
                  <div class="info-hover" id="infoToolTip" *ngIf="showToolTip">
                    <div class="info-tooltip-container">
                        <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/blue-check-box.svg"><span>{{'playerbrief.answered' | translate}}</span></div>
                        <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/not-answered-checkbox.svg"><span>{{'playerbrief.notAnswered' | translate}}</span></div>
                        <div class="info-tooltip-container-item"><img src="assets/icons/final-assessment/flag-check-box.svg"><span>{{'playerbrief.flagged' | translate}}</span></div>
                    </div>
                  </div>
                
                </span>            
                
            </div> -->

            <!-- </div>    -->
            <div [ngClass]="!expandFalse ? 'my-2':''">

              <!-- <div class="flex flex-row justify-between" *ngIf="!expandFalse">                  
                <div class="flex flex-row center-text">
                  <div class="answer-stats-label">Answered&nbsp;</div>
                  <div><mat-chip-list><mat-chip class="light-blue-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></mat-chip-list></div>
                </div>
                <div class="flex flex-row center-text answer-stats-label">
                  Not Answered &nbsp;<mat-checkbox class="example-margin"></mat-checkbox>
                </div>
                <div class="flex flex-row center-text">
                  <div class="answer-stats-label">Skipped&nbsp;</div>
                  <div><mat-chip class="orange-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></div>
                </div>
              </div> -->

              <!-- <div *ngIf="!isSubmitted && viewState === 'attempt' && !expandFalse" class="flex flex-1">
                <ng-template *ngIf="fetchingQuestionsStatus === 'fetching'" [ngTemplateOutlet]="showLoading"></ng-template>
                <div class="flex flex-nowrap margin-right-s margin-left-s quest_num_box"
                  *ngIf="fetchingQuestionsStatus === 'done'">
                  <div class="col" *ngFor="let question of secQuestions; let i = index">
                    <div (click)="scroll(i + 1)" [ngClass]="{
                      'marked-question': isQuestionMarked(question?.questionId),
                      'attempted-question':
                        !isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId),
                      'white-border':
                        !isQuestionMarked(question?.questionId) &&
                        !isQuestionAttempted(question?.questionId) &&
                        currentTheme === 'black-theme',
                      'dark-border':
                        !isQuestionMarked(question?.questionId) &&
                        !isQuestionAttempted(question?.questionId) &&
                        currentTheme !== 'black-theme'
                    }" class="margin-xs">
                      <div *ngIf="!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)">
                        <mat-chip-list><mat-chip class="light-blue-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></mat-chip-list>
                      </div>
                      <div *ngIf="isQuestionMarked(question?.questionId) && !(!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId))">
                        <mat-chip-list><mat-chip class="orange-small">{{ i + 1 }}</mat-chip></mat-chip-list>
                      </div>
                      <div *ngIf="!(!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)) && (!isQuestionMarked(question?.questionId))"
                        class="ovel question-number"><span class="mat-body-2">
                          {{ i + 1 }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->

              <div *ngIf="!isSubmitted && viewState === 'attempt' && !expandFalse" class="flex flex-1">
                <ng-template *ngIf="fetchingQuestionsStatus === 'fetching'"
                  [ngTemplateOutlet]="showLoading"></ng-template>
                <div class="flex flex-wrap margin-right-s margin-left-s quest_num_box quest_num_box_mobile"
                  *ngIf="fetchingQuestionsStatus === 'done'">
                  <div class="col question-list-item" *ngFor="let question of secQuestions; let i = index">
                    <div (click)="scroll(i + 1)" [ngClass]="{
                      'marked-question marked-question-background': isQuestionMarked(question?.questionId),
                      'attempted-question attempted-question-background':
                        !isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)               
                    }"
                      class="margin-side-8 not-visited-question not-visited-background flex justify-center items-center">
                      <div *ngIf="!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)"
                        [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'current-question': 'dark-border'">
                        {{ getQuestionIndex(i) }}
                        <!-- <img class="margin-center" src="assets/icons/final-assessment/correct_arrow.svg"/> -->
                      </div>
                      <div *ngIf="isQuestionMarked(question?.questionId) && !(!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId))">
                        <!-- <mat-chip-list class="question-flag">
                          <mat-chip class="orange-small"> -->
                        <ng-container *ngIf="!isQuestionAttempted(question?.questionId)">{{ getQuestionIndex(i)
                          }}</ng-container>
                        <!-- <ng-container *ngIf="isQuestionAttempted(question?.questionId)"><img class="margin-center" src="assets/icons/final-assessment/correct_arrow.svg"/></ng-container>
                          </mat-chip>
                        </mat-chip-list> -->
                      </div>
                      <div *ngIf="!(!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)) && (!isQuestionMarked(question?.questionId))"
                        class="ovel question-number"
                        [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'current-question': 'dark-border'">
                        <span
                          [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'mat-body-2-bold': 'mat-body-2'">
                          {{ getQuestionIndex(i) }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <ng-container *ngIf="!expandFalse">
                <ng-container>
                  <div class="flex justify-end items-center mt-1 mb-4 gap-3 margin-right-s">
                    <mat-icon
                      [ngClass]="currentSetNumber <= 0 ? 'questions-navigate-disable' : 'questions-navigate-enable' "
                      (click)="currentSetNumber = currentSetNumber - 1">keyboard_arrow_left</mat-icon>
                    <mat-icon [ngClass]="hasNextSet ? 'questions-navigate-enable' : 'questions-navigate-disable' "
                      (click)="currentSetNumber = currentSetNumber + 1">keyboard_arrow_right</mat-icon>
                  </div>
                </ng-container>
                <div class="seperate-text">
                  <span>legend</span>
                </div>
                <div class="my-8 mx-6">
                  <div class="flex justify-between">
                    <div class="gap-4 flex flex-col">
                      <div class="flex gap-2">
                        <div class="flex justify-center items-center attempted-question-background question-guide">1
                        </div>
                        <div class="question-guide-text">Answered</div>
                      </div>
                      <div class="flex gap-2">
                        <div class="flex justify-center items-center question-guide marked-question-background">3</div>
                        <div class="question-guide-text">Marked</div>
                      </div>
                    </div>

                    <div class="gap-4 flex flex-col">
                      <div class="flex gap-2">
                        <div class="flex justify-center items-center question-guide not-answered-background">2</div>
                        <div class="question-guide-text">Not Answered</div>
                      </div>

                      <div class="flex gap-2">
                        <div class="flex justify-center items-center question-guide not-visited-background">4</div>
                        <div class="question-guide-text">Not Visited</div>
                      </div>
                    </div>
                  </div>

                  <!-- <button (click)="openSectionPopup()" >preview</button> -->
                </div>
              </ng-container>

            </div>
            <div class="exapnd-collapse">
              <div class="expand-icon" (click)="toggleExpandforMobile()">
                <mat-icon class="mat-icon notranslate material-icons mat-icon-no-color" role="img" aria-hidden="true">
                  <span *ngIf="expandFalse">expand_more</span>
                  <span *ngIf="!expandFalse">expand_less</span>
                </mat-icon>
              </div>
            </div>

          </div>

          <div>
            <div class="flex flex-1">
              <mat-progress-bar class="quiz-progress" [color]="secondary" [mode]="determinate"
                [value]="((currentQuestionIndex + 1)/totalQCount)*100" [bufferValue]="100">
              </mat-progress-bar>
            </div>
            <ng-container *ngIf="current_Question && !process">
              <viewer-question #questionsReference [id]="'question' + (currentQuestionIndex + 1)"
                [markedQuestions]="markedQuestions" [artifactUrl]="artifactUrl"
                [questionNumber]="currentQuestionIndex + 1" [total]="secQuestions.length" [viewState]="viewState"
                [question]="current_Question" [itemSelectedList]="questionAnswerHash[(current_Question?.questionId)]"
                [primaryCategory]="primaryCategory" (itemSelected)="fillSelectedItems(current_Question, $event)"
                [ePrimaryCategory]="ePrimaryCategory" [totalQCount]="totalQCount"
                (itemSelected)="fillSelectedItems(current_Question, $event)" [showAnswer]="showAnswer"
                [currentQuestion]="current_Question" [showOnlyQuestion]="false"
                [mobileQuestionSetExpand]="!expandFalse">
              </viewer-question>
            </ng-container>
            <div class="flex flex-1">
              <!-- <ng-container
                *ngIf="ePrimaryCategory.PRACTICE_RESOURCE === primaryCategory && ((currentQuestionIndex+1) <= totalQCount)">
                <button *ngIf="!showAnswer" class="text-white ws-mat-primary-background margin-xs quest_btn"
                  mat-raised-button (click)="checkAns(currentQuestionIndex + 1)" i18n="button quiz correct answer">
                  Check Answer
                </button>
              </ng-container> -->
              <div class="flex flex-1 flex-row-reverse margin-right-m butto_box end">
                <ng-container
                  *ngIf="!allSecAttempted.full && allSecAttempted.next && ((currentQuestionIndex+1) === totalQCount)">
                  <button class="text-white ws-mat-primary-background margin-xs quest_btn" mat-raised-button
                    (click)="nextSection(allSecAttempted.next)" i18n="button quiz submit">
                    {{ 'practiceoverview.nextSection' | translate }}
                  </button>
                </ng-container>
              </div>
            </div>
            <ng-template *ngIf="!(current_Question && !process)" [ngTemplateOutlet]="showLoading"></ng-template>
          </div>
        </div>

      </div>
    </div>
    <div class="fixed-question-control" *ngIf="!isSubmitted">
      <div>
        <div class="flex flex-row justify-center">
          <ng-container
            *ngIf="!allSecAttempted.full && allSecAttempted.next && ((currentQuestionIndex+1) === totalQCount)">
            <button class="text-white ws-mat-primary-background quest_btn" mat-raised-button
              (click)="nextSection(allSecAttempted.next)" i18n="button quiz submit">
              {{ 'practiceoverview.nextSection' | translate }}
            </button>
          </ng-container>
          <a *ngIf="currentQuestionIndex !== 0" class="ws-mat-accent-border quest_btn prev" mat-button
            (click)="getNextQuestion(currentQuestionIndex - 1)">
            <ng-container>{{ 'playerbrief.previous' | translate }}</ng-container>
          </a>
          &nbsp;&nbsp;
          <a *ngIf="(currentQuestionIndex+1) !== totalQCount" class="text-white ws-mat-primary-background quest_btn"
            [ngClass]="currentQuestionIndex === 0 ? 'first' : ''" mat-button
            (click)="getNextQuestion(currentQuestionIndex + 1)">
            <ng-container>{{ 'playerbrief.next' | translate }}</ng-container>
          </a>
          &nbsp;&nbsp;
          <a *ngIf="(currentQuestionIndex + 1) === totalQCount" class="text-white ws-mat-primary-background quest_btn"
            mat-button (click)="proceedToSubmit()">
            <ng-container>{{ 'playerbrief.submit' | translate }}</ng-container>
          </a>


        </div>
      </div>
    </div>
    <div id="quiz-end"></div>
    <ng-container *ngIf="isSubmitted && (viewState === 'answer' || viewState === 'review')">
      <viewer-result [quizCategory]="primaryCategory" [quizResponse]="finalResponse" [percentage]="result"
        [isPassed]="finalResponse?.pass" (userSelection)="action($event)" (fetchResult)="getQuizResult()">
      </viewer-result>
    </ng-container>
    <div *ngIf="viewState === 'detail'" class="flex flex-1 flex-column">
      <ng-container *ngIf="this.paperSections && this.paperSections?.length > 0">
        <div class="flex flex-1 flex-column margin-right-m margin-left-m main_practice_box">
          <div class="margin-m" *ngIf="fetchingSectionsStatus === 'fetching'">
            <div class="flex flex-center">
              <mat-spinner></mat-spinner>
            </div>
          </div>
          <div class="flex flex-1 flex-wrap margin-top-l">
            <ng-container *ngFor="let section of this.paperSections">
              <mat-card [ngClass]="getClass(section)"
                class="min-w assessment_card ws-mat-accent-border br-8 no-border margin-m">
                <mat-card-content class="cursor-pointer"
                  [class.spinner]="fetchingQuestionsStatus === 'fetching' && section.identifier === selectedSection.identifier"
                  [attr.disabled]="fetchingQuestionsStatus === 'fetching' && section.identifier === selectedSection.identifier"
                  (click)="startSection(section)">
                  <div class="flex flex-1 flex-column">
                    <span class="flex mat-subheading-1 text-truncate ">{{section.name || 'Section'}}</span>
                    <span class="flex mat-body-2">{{ 'practiceoverview.percentageToPass' | translate }} - <ng-container>
                        {{section.minimumPassPercentage}}
                      </ng-container></span>
                    <span class="flex mat-body-2">{{ 'practiceoverview.totalQuestions' | translate }} -
                      <ng-container>{{section?.maxQuestions ||
                        '0'}}
                      </ng-container></span>
                    <span [innerHtml]="formate(section.additionalInstructions)"></span>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
  <!-- Desktop Skeleton UI -->
  <div class="flex flex-row quiz-container" *ngIf="!isMobile && fetchingQuestionsStatus !== 'done' && viewState !== 'initial' 
  && !(viewState === 'answer') && !isSubmitted">
    <div class="left-container">
      <div class="flex flex-row margin-m justify-between">
        <div>
          <div (click)="back()" class="no-border flex cursor-pointer back_button">
            <mat-icon>arrow_back</mat-icon>
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'182px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
            </span>
          </div>
        </div>
        <div>
          <div class="flex flex-1 flex-row-reverse butto_box end">
            <ws-widget-skeleton-loader [width]="'123px'" [height]="'32px'"
              [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
          </div>
        </div>
      </div>
      <mat-card class="flex flex-1 flex-column margin-m pad-0 quest_mat_card">
        <ng-container *ngIf="true">
          <div class="question_container flex flex-row">
            <div class="border-outline-skeleton">
              <div class="flex flex-middle">
                <p class="margin-bottom-m">
                  <ng-container i18n="question number label"><span class="subheading-1">
                      <ws-widget-skeleton-loader [width]="'180px'" [height]="'28px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                    </span></ng-container>
                </p>
              </div>
              <div class="flex flex-middle">
                <p class="margin-bottom-m">
                  <ng-container i18n="question number label"><span class="subheading-1">
                      <ws-widget-skeleton-loader [width]="'450px'" [height]="'24px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                    </span></ng-container>
                </p>
              </div>
              <div class="flex flex-middle">
                <p class="margin-bottom-m">
                  <ng-container i18n="question number label"><span class="subheading-1">
                      <ws-widget-skeleton-loader [width]="'380px'" [height]="'56px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                  </ng-container>
                </p>
              </div>
              <div class="flex flex-middle">
                <p class="margin-bottom-m">
                  <ng-container i18n="question number label"><span class="subheading-1">
                      <ws-widget-skeleton-loader [width]="'380px'" [height]="'56px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                  </ng-container>
                </p>
              </div>
              <div class="flex flex-middle">
                <p class="margin-bottom-m">
                  <ng-container i18n="question number label"><span class="subheading-1">
                      <ws-widget-skeleton-loader [width]="'380px'" [height]="'56px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                  </ng-container>
                </p>
              </div>
              <div class="flex flex-middle">
                <p class="margin-bottom-m">
                  <ng-container i18n="question number label"><span class="subheading-1">
                      <ws-widget-skeleton-loader [width]="'380px'" [height]="'56px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                  </ng-container>
                </p>
              </div>

            </div>

          </div>


        </ng-container>
      </mat-card>
    </div>
    <div class="right-container">
      <div class="question-list">
        <div class="ques_stats_container">
          <div class="flex flex-row justify-around ques_stats_container_box">
            <h3 class="mat-subheading-2">
              <p> <ws-widget-skeleton-loader [width]="'85px'" [height]="'24px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
            </h3>
            <div class="timer" *ngIf="quizJson?.timeLimit">
              <p> <ws-widget-skeleton-loader [width]="'102px'" [height]="'32px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
            </div>
          </div>
          <div class="seperator"></div>
          <div>
            <div class="flex flex-row justify-around">
              <div class="flex flex-col align-center">
                <div class="ques-count">
                  <p> <ws-widget-skeleton-loader [width]="'12px'" [height]="'24px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                </div>
                <div class="stats-label">
                  <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                </div>
              </div>
              <div class="flex flex-col align-center">
                <div class="ques-count">
                  <p> <ws-widget-skeleton-loader [width]="'12px'" [height]="'24px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                </div>
                <div class="stats-label">
                  <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                </div>
              </div>
              <div class="flex flex-col align-center">
                <div class="ques-count">
                  <p> <ws-widget-skeleton-loader [width]="'12px'" [height]="'24px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                </div>
                <div class="stats-label">
                  <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                </div>
              </div>
            </div>
          </div>
          <div class="seperate-text">
            <span>
              <p> <ws-widget-skeleton-loader [width]="'386px'" [height]="'16px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
            </span>
          </div>
          <div class="flex flex-row justify-around">

            <div class="flex flex-row center-text">
              <div class="answer-stats-label">
                <p> <ws-widget-skeleton-loader [width]="'64px'" [height]="'20px'"
                    [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
              </div>
            </div>
            <div class="flex flex-row center-text">
              <div class="answer-stats-label">
                <p> <ws-widget-skeleton-loader [width]="'64px'" [height]="'20px'"
                    [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
              </div>
            </div>
            <div class="flex flex-row center-text">
              <div class="answer-stats-label">
                <p> <ws-widget-skeleton-loader [width]="'64px'" [height]="'20px'"
                    [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
              </div>
            </div>
          </div>
        </div>
        <div class="seperator"></div>
        <div class="flex flex-1">
          <div class="flex flex-wrap margin-right-s margin-left-s quest_num_box">
            <div class="col" *ngFor="let item of [1, 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]">
              <div class="margin-xs">
                <ws-widget-skeleton-loader [width]="'44px'" [height]="'28px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Mobile Skeleton UI -->

  <div class="flex flex-row quiz-container"
    *ngIf="isMobile && fetchingQuestionsStatus !== 'done' && viewState !== 'initial' && !(viewState === 'answer') && !isSubmitted">
    <div class="flex flex-column">
      <div>
        <div class="flex flex-row justify-around align-end">
          <div>
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
            </span>
          </div>
          <div (click)="back()" class="no-border flex cursor-pointer back_button">
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'120px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
            </span>
          </div>
          <div class="timer" *ngIf="quizJson?.timeLimit">
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'120px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
            </span>
          </div>
        </div>
        <div class="flex flex-column justify-between align-center assessment-header">
          <div class="question-list">
            <div class="ques_stats_container">
              <div class="mb-24">
                <div class="flex flex-row justify-around">
                  <div class="flex flex-col align-center">
                    <div class="ques-count">
                      <ws-widget-skeleton-loader [width]="'24px'" [height]="'24px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                    </div>
                    <div class="stats-label">
                      <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                    </div>
                  </div>
                  <div class="flex flex-col align-center">
                    <div class="ques-count">
                      <ws-widget-skeleton-loader [width]="'24px'" [height]="'24px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                    </div>
                    <div class="stats-label">
                      <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                    </div>
                  </div>
                  <!-- <div class="flex flex-col align-center">
                      <div class="ques-count">{{markedQuestions.size}}</div>
                      <div class="stats-label">Skipped</div>
                    </div> -->
                </div>
              </div>
              <div class="">
                <span><span>
                    <p> <ws-widget-skeleton-loader [width]="'386px'" [height]="'16px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                  </span></span>
              </div>

            </div>

          </div>
          <div>

            <!-- <div class="flex flex-row justify-between" *ngIf="!expandFalse">                  
                <div class="flex flex-row center-text">
                  <div class="answer-stats-label">Answered&nbsp;</div>
                  <div><mat-chip-list><mat-chip class="light-blue-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></mat-chip-list></div>
                </div>
                <div class="flex flex-row center-text answer-stats-label">
                  Not Answered &nbsp;<mat-checkbox class="example-margin"></mat-checkbox>
                </div>
                <div class="flex flex-row center-text">
                  <div class="answer-stats-label">Skipped&nbsp;</div>
                  <div><mat-chip class="orange-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></div>
                </div>
              </div> -->

            <div *ngIf="!isSubmitted && viewState === 'attempt' && !expandFalse" class="flex flex-1">
              <ng-template *ngIf="fetchingQuestionsStatus === 'fetching'"
                [ngTemplateOutlet]="showLoading"></ng-template>
              <div class="flex flex-nowrap margin-right-s margin-left-s quest_num_box"
                *ngIf="fetchingQuestionsStatus === 'done'">
                <div class="col" *ngFor="let question of secQuestions; let i = index">
                  <div (click)="scroll(i + 1)" [ngClass]="{
                      'marked-question': isQuestionMarked(question?.questionId),
                      'attempted-question':
                        !isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId),
                      'white-border':
                        !isQuestionMarked(question?.questionId) &&
                        !isQuestionAttempted(question?.questionId) &&
                        currentTheme === 'black-theme',
                      'dark-border':
                        !isQuestionMarked(question?.questionId) &&
                        !isQuestionAttempted(question?.questionId) &&
                        currentTheme !== 'black-theme'
                    }" class="margin-xs">
                    <div *ngIf="!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)">
                      <mat-chip-list class="question-flag"><mat-chip
                          class="light-blue-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></mat-chip-list>
                    </div>
                    <div *ngIf="isQuestionMarked(question?.questionId) && !(!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId))">
                      <mat-chip-list class="question-flag"><mat-chip class="orange-small">{{ i + 1
                          }}</mat-chip></mat-chip-list>
                    </div>
                    <div *ngIf="!(!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)) && (!isQuestionMarked(question?.questionId))"
                      class="ovel question-number"><span class="mat-body-2">
                        {{ i + 1 }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
        <div class="question_container flex flex-row">
          <div class="border-outline-skeleton">
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'180px'" [height]="'28px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                  </span></ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'320px'" [height]="'24px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                  </span></ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'300px'" [height]="'56px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                </ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'300px'" [height]="'56px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                </ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'300px'" [height]="'56px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                </ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'300px'" [height]="'56px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                </ng-container>
              </p>
            </div>

          </div>

        </div>
      </div>

    </div>
    <div class="fixed-question-control">
      <div>
        <div class="flex flex-row justify-around">
          <p> <ws-widget-skeleton-loader [width]="'320px'" [height]="'32px'"
              [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
        </div>
      </div>
    </div>
  </div>
  <!-- do not delete this
    {{'current Q'}}===={{current_Question | json}}
  <br>
  {{'process'}}===={{!process}}
  <br>
  {{'viewState'}} ===>{{viewState }}
  <br>
  {{'isSubmitted'}}=====>{{isSubmitted}} -->
</ng-container>

<!------------------------------------------------------------------------------------------------------------------------------------>

<!-- Desktop Standalone Assessment-->
<ng-container *ngIf="coursePrimaryCategory == 'Standalone Assessment'">
  <div #quizContainer class="quiz-container-standalone"
    *ngIf="viewState !== 'initial' && !isMobile && fetchingQuestionsStatus === 'done'">
    <div class="margin-m"
      *ngIf="fetchingQuestionsStatus === 'done' && viewState !== 'detail' && !(viewState === 'answer') && !isSubmitted">
      <div class="standalone-left-container">
        <div class="flex flex-row justify-between align-center assessment-header">
          <div>
            <div (click)="back()" class="no-border flex cursor-pointer back_button">
              <span class="subheading-back">{{resourceName}}</span>
            </div>
          </div>
          <div>
            <div class="flex flex-row">
              <div class="flex flex-col stats-label-top">
                <div><img src="assets/icons/final-assessment/assessment.svg"></div>
                <div>{{noOfQuestions}} {{ 'playerbrief.questions' | translate }}</div>
              </div>
              <div class="flex flex-col margin-left-64 stats-label-top" *ngIf="allSectionTimeLimit">
                <div><img src="assets/icons/final-assessment/timer.svg"></div>
                <div>{{( allSectionTimeLimit | pipeDurationTransform: 'hms')}}</div>
              </div>
            </div>
          </div>
        </div>
        <div class="flex flex-row question-section-container" [ngClass]="assessmentType !== 'optionWeightage' ? 'justify-between': 'justify-right'">
          <div class="section-dd-container" *ngIf="assessmentType !== 'optionWeightage'">
            <div class="flex flex-row">
              <div>
                <mat-form-field appearance="none">
                  <select matNativeControl required class="section-dd" #choosedValue
                    (change)="changeSection($event.target.value)">
                    <option [value]="section.identifier" [selected]="section.identifier === selectedSectionIdentifier"
                      *ngFor="let section of paperSections">{{section?.name}}</option>
                  </select>
                </mat-form-field>
              </div>
              <div class="section-info tooltip" *ngIf="sectionalInstruction">
                <img src="assets/icons/final-assessment/question_info.svg" />
                <span class="tooltiptext" [innerHtml]="sectionalInstruction"></span>
              </div>
            </div>
          </div>

          <div>
            <a class="text-white ws-mat-primary-background margin-xs quest_btn justify-right" mat-button (click)="proceedToSubmit()">
              <ng-container *ngIf="!isXsmall">{{ 'playerbrief.submitTheTest' | translate }}</ng-container>
            </a>
          </div>
        </div>
        <div>
          <ng-container *ngIf="current_Question && !process">
            <viewer-question #questionsReference [id]="'question' + (currentQuestionIndex + 1)"
              [markedQuestions]="markedQuestions" [artifactUrl]="artifactUrl"
              [questionNumber]="currentQuestionIndex + 1" [total]="secQuestions.length" [viewState]="viewState"
              [question]="current_Question" [itemSelectedList]="questionAnswerHash[(current_Question?.questionId)]"
              [primaryCategory]="primaryCategory" [ePrimaryCategory]="ePrimaryCategory" [totalQCount]="totalQCount"
              (itemSelected)="fillSelectedItems(current_Question, $event)" [showAnswer]="showAnswer"
              [currentQuestion]="current_Question" [coursePrimaryCategory]="coursePrimaryCategory"
              [showOnlyQuestion]="true" [showMarkForReview]="false"
              [assessmentType]="assessmentType">
            </viewer-question>
          </ng-container>
        </div>

      </div>

      <div class="standalone-quiz-container flex flex-row">
        <div 
          [ngClass]="expandFalse ? ( assessmentType !== 'optionWeightage' ? 'quiz-question-left-container' : 'quiz-question-left-container-full') : 'quiz-question-left-container-full'">

          <div class="border-outline">

            <div class="flex flex-1">
              <mat-progress-bar class="quiz-progress" [color]="secondary" [mode]="determinate"
                [value]="((currentQuestionIndex + 1)/totalQCount)*100" [bufferValue]="100">
              </mat-progress-bar>
            </div>
            <ng-container *ngIf="current_Question && !process">
              <viewer-question #questionsReference [id]="'question' + (currentQuestionIndex + 1)"
                [markedQuestions]="markedQuestions" [artifactUrl]="artifactUrl"
                [questionNumber]="currentQuestionIndex + 1" [total]="secQuestions.length" [viewState]="viewState"
                [question]="current_Question" [itemSelectedList]="questionAnswerHash[(current_Question?.questionId)]"
                [primaryCategory]="primaryCategory" [ePrimaryCategory]="ePrimaryCategory" [totalQCount]="totalQCount"
                (itemSelected)="fillSelectedItems(current_Question, $event)" [showAnswer]="showAnswer"
                [currentQuestion]="current_Question" [coursePrimaryCategory]="coursePrimaryCategory"
                [showOnlyQuestion]="false"
                [questionAnswerHash]="questionAnswerHash">
              </viewer-question>
            </ng-container>
            <div class="flex flex-1">
            </div>
            <ng-template *ngIf="!(current_Question && !process)" [ngTemplateOutlet]="showLoading"></ng-template>
          </div>
        </div>
        <div *ngIf="assessmentType !== 'optionWeightage'" class="exapnd-collapse-desktop">
          <div class="expand-icon" (click)="toggleExpandforMobile()">
            <mat-icon class="mat-icon notranslate material-icons mat-icon-no-color" role="img" aria-hidden="true">
              <span *ngIf="expandFalse">arrow_forward</span>
              <span *ngIf="!expandFalse">arrow_backward</span>
            </mat-icon>
          </div>
        </div>
        <div *ngIf="assessmentType !== 'optionWeightage'"  [ngClass]="(expandFalse && assessmentType !== 'optionWeightage') ? 'quiz-question-right-container': 'quiz-question-right-container-hide'">
          <div class="question-list">
            <div class="ques_stats_container">
              <div class="flex flex-row justify-between ques_stats_container_box">
                <div class="flex flex-row">
                  <div>
                    <p class="mat-subheading-1 questions">
                      {{ 'playerbrief.questions' | translate | titlecase}}
                    </p>
                  </div>
                </div>
                <div class="timer" *ngIf="timeLeft">
                  <mat-chip-list><mat-chip class="light-blue"><span class="chip-text">
                        <div *ngIf="timeLeft" class="flex flex-1 flex-center">
                          <img src="assets/icons/final-assessment/timer.svg">
                          &nbsp;&nbsp;
                          <ng-container *ngIf="quizJson.timeLimit >= 3600">
                            <div *ngIf="timeLeft > 120">
                              <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2H'
                                }}</span>
                            </div>
                            <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                              <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2H'
                                }}</span>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="quizJson.timeLimit < 3600">
                            <div *ngIf="timeLeft > 120">
                              <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2M'
                                }}</span>
                            </div>
                            <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                              <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2M'
                                }}</span>
                            </div>
                          </ng-container>
                          <div *ngIf="isSubmitted" class="margin-left-xs mat-body-strong" i18n>
                            <span class="time-title ws-mat-default-text"> (Submitted)</span>
                          </div>
                        </div>
                      </span>
                    </mat-chip></mat-chip-list>
                </div>
              </div>
              <div class="mb-24 mt-4">
                <div class="flex flex-row justify-around">
                  <div class="flex flex-col align-center">
                    <div class="ques-count">{{getSectionTotalQuestionAndAnswerCount()['totalCount'] - getSectionTotalQuestionAndAnswerCount()['answered']}}</div>
                    <div class="stats-label">{{ 'playerbrief.notAnswered' | translate }}</div>
                  </div>
                  <div class="flex flex-col align-center">
                    <div class="ques-count">{{getSectionTotalQuestionAndAnswerCount()['answered']}}</div>
                    <div class="stats-label">{{ 'playerbrief.answered' | translate }}</div>
                  </div>
                </div>
              </div>
              <div class="seperate-text-standalone">
                <span>{{ 'practiceoverview.questions' | translate | titlecase}}</span>
              </div>
            </div>
            <div *ngIf="!isSubmitted && !isXsmall && viewState === 'attempt'"
              class="flex flex-1 question-box-auto-height">
              <ng-template *ngIf="fetchingQuestionsStatus === 'fetching'"
                [ngTemplateOutlet]="showLoading"></ng-template>
              <div class="flex flex-wrap margin-right-s margin-left-s quest_num_box quest_num_box"
                *ngIf="fetchingQuestionsStatus === 'done'">
                <div class="col question-list-item" *ngFor="let question of secQuestions; let i = index">
                  <div (click)="scroll(i + 1)" class="not-visited-question not-visited-background" [ngClass]="{
                    'marked-question-standalone marked-question-standalone-background': isQuestionMarked(question?.questionId),
                    'attempted-question attempted-question-background':isQuestionAttempted(question?.questionId),
                    'not-attempted-question not-answered-background':!isQuestionAttempted(question?.questionId) && !isQuestionMarked(question?.questionId) && isQuestionVisited(question.questionId)
                   

                  }"
                    class="margin-side-8 not-visited-question not-visited-background flex justify-center items-center">
                    <div *ngIf="!isQuestionMarked(question?.questionId) &&
                      isQuestionAttempted(question?.questionId)"
                      [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'current-question-standalone': 'dark-border-standalone'">
                      {{ getQuestionIndex(i) }}
                    </div>
                    <div *ngIf="isQuestionMarked(question?.questionId) && !(!isQuestionMarked(question?.questionId) &&
                      isQuestionAttempted(question?.questionId))">{{ getQuestionIndex(i)}}
                      <ng-container *ngIf="!isQuestionAttempted(question?.questionId)">{{ getQuestionIndex(i)
                        }}</ng-container>

                    </div>

                    <div *ngIf="!(!isQuestionMarked(question?.questionId) &&
                      isQuestionAttempted(question?.questionId)) && (!isQuestionMarked(question?.questionId))"
                      class="ovel-standalone question-number"
                      [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'current-question-standalone': 'dark-border-standalone'">
                      <span
                        [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'mat-body-2-bold': 'mat-body-2'">
                        {{ getQuestionIndex(i) }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <ng-container>
              <div class="flex justify-end items-center mt-1 mb-4 gap-3 margin-right-s">
                <mat-icon *ngIf="!(currentSetNumber <= 0)"
                  [ngClass]="currentSetNumber <= 0 ? 'questions-navigate-disable' : 'questions-navigate-enable' "
                  (click)="currentSetNumber = currentSetNumber - 1">keyboard_arrow_left</mat-icon>
                <mat-icon *ngIf="hasNextSet"
                  [ngClass]="hasNextSet ? 'questions-navigate-enable' : 'questions-navigate-disable' "
                  (click)="currentSetNumber = currentSetNumber + 1">keyboard_arrow_right</mat-icon>
              </div>
            </ng-container>
            <div class="seperate-text-standalone">
              <span>Legend</span>
            </div>
            <div class="my-8 mx-6">
              <div class="flex justify-between">
                <div class="gap-4 flex flex-col">
                  <div class="flex gap-2  align-center">
                    <div class="flex justify-center items-center attempted-question-background question-guide"><span
                        class="question-guide-text-legend">1</span></div>
                    <div class="question-guide-text">Answered</div>
                  </div>
                  <div class="flex gap-2  align-center">
                    <div class="flex justify-center items-center question-guide marked-question-standalone-background"><span
                        class="question-guide-text-legend">3</span></div>
                    <div class="question-guide-text">Marked</div>
                  </div>
                </div>

                <div class="gap-4 flex flex-col">
                  <div class="flex gap-2  align-center ml-5">
                    <div class="flex justify-center items-center question-guide not-answered-background"><span
                        class="question-guide-text-legend">2</span></div>
                    <div class="question-guide-text">Not Answered</div>
                  </div>

                  <div class="flex gap-2  align-center ml-5">
                    <div class="flex justify-center items-center question-guide not-visited-background"><span
                        class="question-guide-text-legend-not-visited">4</span></div>
                    <div class="question-guide-text">Not Visited</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="standalone-quiz-container-controls"
      *ngIf="fetchingQuestionsStatus === 'done' && viewState !== 'detail' && !(viewState === 'answer') && !isSubmitted">
      <div class="flex flex-row mt-2" [ngClass]="assessmentType !== 'optionWeightage' ? 'justify-between' : 'justify-right'">
        <div class="flex" *ngIf="assessmentType !== 'optionWeightage'">
          <div>
            <viewer-question #questionsReference [id]="'question' + (currentQuestionIndex + 1)"
              [markedQuestions]="markedQuestions" [artifactUrl]="artifactUrl"
              [questionNumber]="currentQuestionIndex + 1" [total]="secQuestions.length" [viewState]="viewState"
              [question]="current_Question" [itemSelectedList]="questionAnswerHash[(current_Question?.questionId)]"
              [primaryCategory]="primaryCategory" [ePrimaryCategory]="ePrimaryCategory" [totalQCount]="totalQCount"
              (itemSelected)="fillSelectedItems(current_Question, $event)" [showAnswer]="showAnswer"
              [currentQuestion]="current_Question" [coursePrimaryCategory]="coursePrimaryCategory"
              [showOnlyQuestion]="false" [showMarkForReview]="true"
              [questionAnswerHash]="questionAnswerHash"
              (getNextQuestion)="getNextQuestion(currentQuestionIndex + 1)">
            </viewer-question>
          </div>

        </div>
        <div class="flex">
          <div>
            <div class="flex flex-1 flex-row-reverse butto_box end">
              <ng-container
                *ngIf="!allSecAttempted.full && allSecAttempted.next && ((currentQuestionIndex+1) === totalQCount) && assessmentType !== 'optionWeightage'">
                <button class="text-white ws-mat-primary-background margin-xs quest_btn" mat-raised-button
                  (click)="nextSection(allSecAttempted.next)" i18n="button quiz submit">
                  {{ 'practiceoverview.nextSection' | translate }}
                </button>
              </ng-container>
              <a *ngIf="(currentQuestionIndex+1) !== totalQCount"
                class="text-white ws-mat-primary-background margin-xs quest_btn" mat-button
                (click)="getNextQuestion(currentQuestionIndex + 1)">
                <ng-container *ngIf="!isXsmall">Save & Next</ng-container>
              </a>
              &nbsp;&nbsp;
              <a *ngIf="currentQuestionIndex !== 0" class="ws-mat-accent-border margin-xs quest_btn prev" mat-button
                (click)="getNextQuestion(currentQuestionIndex - 1)">
                <ng-container *ngIf="!isXsmall">{{ 'playerbrief.previous' | translate }}</ng-container>
              </a>
            </div>
          </div>

        </div>
      </div>

    </div>
    <div id="quiz-end"></div>
    <ng-container *ngIf="isSubmitted && (viewState === 'answer' || viewState === 'review')">
      <viewer-result [quizCategory]="primaryCategory" [quizResponse]="finalResponse" [percentage]="result"
        [isPassed]="finalResponse?.pass" (userSelection)="action($event)" (fetchResult)="getQuizResult()"
        [coursePrimaryCategory]="coursePrimaryCategory">
      </viewer-result>
    </ng-container>
    <div *ngIf="viewState === 'detail'" class="flex flex-1 flex-column">
      <ng-container *ngIf="this.paperSections && this.paperSections?.length > 0">
        <div class="flex flex-1 flex-column margin-right-m margin-left-m main_practice_box">
          <div class="margin-m" *ngIf="fetchingSectionsStatus === 'fetching'">
            <div class="flex flex-center">
              <mat-spinner></mat-spinner>
            </div>
          </div>
          <div class="flex flex-1 flex-wrap margin-top-l">
            <ng-container *ngFor="let section of this.paperSections">
              <mat-card [ngClass]="getClass(section)"
                class="min-w assessment_card ws-mat-accent-border br-8 no-border margin-m">
                <mat-card-content class="cursor-pointer"
                  [class.spinner]="fetchingQuestionsStatus === 'fetching' && section.identifier === selectedSection.identifier"
                  [attr.disabled]="fetchingQuestionsStatus === 'fetching' && section.identifier === selectedSection.identifier"
                  (click)="startSection(section)">
                  <div class="flex flex-1 flex-column">
                    <span class="flex mat-subheading-1 text-truncate ">{{section.name || 'Section'}}</span>
                    <span class="flex mat-body-2">Percentage to pass - <ng-container>
                        {{section.minimumPassPercentage}}
                      </ng-container></span>
                    <span class="flex mat-body-2">Total questions - <ng-container>{{section?.maxQuestions ||
                        '0'}}
                      </ng-container></span>
                    <span [innerHtml]="formate(section.additionalInstructions)"></span>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
  <!-- Desktop Skeleton UI -->
  <div class="flex flex-row quiz-container-standalone" *ngIf="!isMobile && fetchingQuestionsStatus !== 'done' && viewState !== 'initial' 
  && !(viewState === 'answer') && !isSubmitted">
    <div class="standalone-left-container">
      <div class="flex flex-row margin-m justify-between">
        <div>
          <div class="flex flex-row">
            <div class="flex flex-col stats-label-top">
              <div class="margin-bottom-m"> <ws-widget-skeleton-loader [width]="'0'" [height]="'0'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></div>
              <div> <ws-widget-skeleton-loader [width]="'160px'" [height]="'28px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></div>
            </div>
            <div class="flex flex-col stats-label-top">
              <div class="margin-bottom-m ml-5"> <ws-widget-skeleton-loader [width]="'0'" [height]="'0'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></div>
            </div>
          </div>
        </div>
        <div>
          <div class="flex flex-row">
            <div class="flex flex-col stats-label-top">
              <div class="margin-bottom-m"> <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></div>
              <div> <ws-widget-skeleton-loader [width]="'80px'" [height]="'28px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></div>

            </div>
            <div class="flex flex-col stats-label-top">
              <div class="margin-bottom-m ml-5"> <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></div>
              <div class="ml-5"> <ws-widget-skeleton-loader [width]="'80px'" [height]="'28px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></div>
            </div>
          </div>
        </div>
      </div>
      <div class="flex flex-row margin-m justify-between">
        <div class="flex flex-row">
          <div class="tats-label-top">
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'182px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>

            </span>
          </div>
          <div>
            <div class="ml-5"> <ws-widget-skeleton-loader [width]="'20px'" [height]="'20px'"
                [bindingClass]="'flex rounded-full h-16'"></ws-widget-skeleton-loader></div>
          </div>
        </div>

        <div>
          <div class="flex flex-1 flex-row-reverse butto_box end">
            <ws-widget-skeleton-loader [width]="'123px'" [height]="'32px'"
              [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
          </div>
        </div>
      </div>
      <div class="flex flex-row margin-m justify-between">
        <div>
          <div class="no-border flex cursor-pointer back_button">
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'1300px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
            </span>
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-row">
      <div class="quiz-question-left-container">
        <mat-card class="flex flex-1 flex-column margin-m pad-0 quest_mat_card">
          <ng-container *ngIf="true">
            <div class="question_container flex flex-row">
              <div class="border-outline-skeleton">
                <div class="flex flex-middle">
                  <p class="margin-bottom-m">
                    <ng-container i18n="question number label"><span class="subheading-1">
                        <ws-widget-skeleton-loader [width]="'450px'" [height]="'24px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                      </span></ng-container>
                  </p>
                </div>
                <div class="flex flex-middle">
                  <p class="margin-bottom-m">
                    <ng-container i18n="question number label"><span class="subheading-1">
                        <ws-widget-skeleton-loader [width]="'380px'" [height]="'56px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                    </ng-container>
                  </p>
                </div>
                <div class="flex flex-middle">
                  <p class="margin-bottom-m">
                    <ng-container i18n="question number label"><span class="subheading-1">
                        <ws-widget-skeleton-loader [width]="'380px'" [height]="'56px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                    </ng-container>
                  </p>
                </div>
                <div class="flex flex-middle">
                  <p class="margin-bottom-m">
                    <ng-container i18n="question number label"><span class="subheading-1">
                        <ws-widget-skeleton-loader [width]="'380px'" [height]="'56px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                    </ng-container>
                  </p>
                </div>
                <div class="flex flex-middle">
                  <p class="margin-bottom-m">
                    <ng-container i18n="question number label"><span class="subheading-1">
                        <ws-widget-skeleton-loader [width]="'380px'" [height]="'56px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                    </ng-container>
                  </p>
                </div>

              </div>

            </div>


          </ng-container>
        </mat-card>
      </div>
      <div class="quiz-question-right-container">
        <div class="question-list">
          <div class="ques_stats_container">
            <div class="flex flex-row justify-between ques_stats_container_box">
              <h3 class="mat-subheading-2">
                <p> <ws-widget-skeleton-loader [width]="'85px'" [height]="'24px'"
                    [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
              </h3>
              <div class="timer" *ngIf="quizJson?.timeLimit">
                <p> <ws-widget-skeleton-loader [width]="'102px'" [height]="'32px'"
                    [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
              </div>
            </div>
            <div class="seperator"></div>
            <div>
              <div class="flex flex-row justify-around">
                <div class="flex flex-col align-center">
                  <div class="ques-count">
                    <p> <ws-widget-skeleton-loader [width]="'12px'" [height]="'24px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                  </div>
                  <div class="stats-label">
                    <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                  </div>
                </div>
                <div class="flex flex-col align-center">
                  <div class="ques-count">
                    <p> <ws-widget-skeleton-loader [width]="'12px'" [height]="'24px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                  </div>
                  <div class="stats-label">
                    <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                  </div>
                </div>
              </div>
            </div>
            <div class="seperator"></div>
            <div class="flex flex-1">
              <div class="flex flex-wrap margin-right-s margin-left-s quest_num_box">
                <div class="col" *ngFor="let item of [1, 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]">
                  <div class="margin-xs">
                    <ws-widget-skeleton-loader [width]="'44px'" [height]="'28px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                  </div>
                </div>
              </div>
            </div>
            <div class="seperator"></div>
            <div class="flex flex-row justify-around">

              <div class="flex flex-row">
                <div class="answer-stats-label">
                  <p> <ws-widget-skeleton-loader [width]="'32px'" [height]="'32px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                </div>
                <div class="answer-stats-label ml-5">
                  <p> <ws-widget-skeleton-loader [width]="'64px'" [height]="'20px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                </div>
              </div>
              <div class="flex flex-row">
                <div class="answer-stats-label">
                  <p> <ws-widget-skeleton-loader [width]="'32px'" [height]="'32px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                </div>
                <div class="answer-stats-label ml-5">
                  <p> <ws-widget-skeleton-loader [width]="'64px'" [height]="'20px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                </div>
              </div>             
            </div>
            <div class="flex flex-row justify-around">

              <div class="flex flex-row">
                <div class="answer-stats-label">
                  <p> <ws-widget-skeleton-loader [width]="'32px'" [height]="'32px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                </div>
                <div class="answer-stats-label ml-5">
                  <p> <ws-widget-skeleton-loader [width]="'64px'" [height]="'20px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                </div>
              </div>
              <div class="flex flex-row">
                <div class="answer-stats-label">
                  <p> <ws-widget-skeleton-loader [width]="'32px'" [height]="'32px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                </div>
                <div class="answer-stats-label ml-5">
                  <p> <ws-widget-skeleton-loader [width]="'64px'" [height]="'20px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                </div>
              </div>             
            </div>
          </div>

        </div>
      </div>
    </div>
    <div class="standalone-quiz-container-controls">
    <div class="flex flex-row justify-between mt-4">
      <div class="flex">
        <div class="flex flex-row">
            <div i18n="question number label" class="ml-5"><span class="subheading-1">
                <ws-widget-skeleton-loader [width]="'120px'" [height]="'28px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
            </div>
            <div i18n="question number label" class="ml-5"><span class="subheading-1">
              <ws-widget-skeleton-loader [width]="'120px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
          </div>
        </div>

      </div>
      <div class="flex">
        <div class="flex flex-row">
            <div i18n="question number label" class="ml-5"><span class="subheading-1">
                <ws-widget-skeleton-loader [width]="'120px'" [height]="'28px'"
                  [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
            </div>
            <div i18n="question number label" class="ml-5 mr-5"    ><span class="subheading-1">
              <ws-widget-skeleton-loader [width]="'120px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
          </div>
        </div>

      </div>
    </div>

  </div>
  </div>
  <!-- Mobile -->
  <div #quizContainer class="standalone-assessment-mobile" [ngClass]="assessmentType !== 'optionWeightage' ? 'quiz-container-standalone':'quiz-container-option-weightage'"
    *ngIf="viewState !== 'initial' && isMobile && fetchingQuestionsStatus === 'done'">
    <div class="flex flex-column overflow-hidden" *ngIf="!isSubmitted">
      <div>
        <div class="flex flex-row justify-around align-center my-2 mx-2">
          <div (click)="back()">
            <img class="vertical-middle cursor-pointer" src="assets/icons/final-assessment/mobile-cross.svg" />
          </div>
          <div class="no-border flex cursor-pointer text-truncate">
            <span class="">{{resourceName}}</span>
          </div>
          <div>
            <div class="flex flex-row">
              <div class="flex flex-col stats-label-top">
                <div><img class="vertical-middle" src="assets/icons/final-assessment/assessment.svg"></div>
                <div>{{noOfQuestions}} {{ 'playerbrief.questions' | translate }}</div>
              </div>
              <div class="flex flex-col stats-label-top ml-5" *ngIf="allSectionTimeLimit">
                <div><img src="assets/icons/final-assessment/timer.svg"></div>
                <div>{{( allSectionTimeLimit | pipeDurationTransform: 'hms')}}</div>
              </div>
            </div>
          </div>
          
        </div>
        <div class="flex flex-row question-section-container" [ngClass]="assessmentType !== 'optionWeightage' ? 'justify-around':'justify-center'">
          <div class="section-dd-container">
            <div class="flex flex-row">
              <div *ngIf="assessmentType !== 'optionWeightage'">
                <mat-form-field appearance="none">
                  <select matNativeControl required class="section-dd" #choosedValue
                    (change)="changeSection($event.target.value)">
                    <option [value]="section.identifier" [selected]="section.identifier === selectedSectionIdentifier"
                      *ngFor="let section of paperSections">{{section?.name}}</option>
                  </select>
                </mat-form-field>
              </div>              
            </div>
          </div>

          <div>
            <a class="text-white ws-mat-primary-background margin-xs" [ngClass]="assessmentType !== 'optionWeightage' ? 'quest_btn' : 'quest_btn_option_weightage'" mat-button (click)="proceedToSubmit()">
              <ng-container>{{ 'playerbrief.submitTheTest' | translate }}</ng-container>
            </a>
          </div>
        </div>
        <div>
          <ng-container *ngIf="current_Question && !process">
            <viewer-question #questionsReference [id]="'question' + (currentQuestionIndex + 1)"
              [markedQuestions]="markedQuestions" [artifactUrl]="artifactUrl"
              [questionNumber]="currentQuestionIndex + 1" [total]="secQuestions.length" [viewState]="viewState"
              [question]="current_Question" [itemSelectedList]="questionAnswerHash[(current_Question?.questionId)]"
              [primaryCategory]="primaryCategory" [ePrimaryCategory]="ePrimaryCategory" [totalQCount]="totalQCount"
              (itemSelected)="fillSelectedItems(current_Question, $event)" [showAnswer]="showAnswer"
              [currentQuestion]="current_Question" [coursePrimaryCategory]="coursePrimaryCategory"
              [showOnlyQuestion]="true" [showMarkForReview]="false"
              [assessmentType]="assessmentType"
              [questionAnswerHash]="questionAnswerHash">
            </viewer-question>
          </ng-container>
        </div>
        <div class="flex flex-column justify-between align-center" *ngIf="assessmentType !== 'optionWeightage'">
          <div class="question-list-mweb my-2">
            <div class="ques_stats_container">
              <div class="flex flex-row justify-between">
                <div class="flex flex-row">
                  <div>
                    <p class="mat-subheading-1 questions">
                      {{ 'playerbrief.questions' | translate | titlecase}}
                    </p>
                  </div>
                </div>

                <div class="timer" *ngIf="timeLeft">
                  <mat-chip-list><mat-chip class="light-blue"><span class="chip-text">
                        <div *ngIf="timeLeft" class="flex flex-1 flex-center">
                          <img src="assets/icons/final-assessment/timer.svg">
                          &nbsp;&nbsp;

                          <ng-container *ngIf="quizJson.timeLimit >= 3600">

                            <div *ngIf="timeLeft > 120">
                              <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2H'
                                }}</span>
                            </div>
                            <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                              <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2H'
                                }}</span>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="quizJson.timeLimit < 3600">
                            <div *ngIf="timeLeft > 120">
                              <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2M'
                                }}</span>
                            </div>
                            <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
                              <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2M'
                                }}</span>
                            </div>
                          </ng-container>

                          <div *ngIf="isSubmitted" class="margin-left-xs mat-body-strong" i18n>
                            <span class="time-title ws-mat-default-text"> (Submitted)</span>
                          </div>
                        </div>
                      </span>
                    </mat-chip></mat-chip-list>
                </div>
              </div>
              <div class="mb-24 mt-4">
                <div class="flex flex-row gap-10">
                  <div class="flex flex-col align-center">
                    <div class="ques-count">{{totalQuestionsCount - questionAttemptedCount}}</div>
                    <div class="stats-label">{{ 'playerbrief.notAnswered' | translate }}</div>
                  </div>
                  <div class="flex flex-col align-center">
                    <div class="ques-count">{{questionAttemptedCount ? questionAttemptedCount : 0}}</div>
                    <div class="stats-label">{{ 'playerbrief.answered' | translate }}</div>
                  </div>
                </div>
              </div>
              <div class="seperate-text-standalone">
                <span>{{ 'practiceoverview.questions' | translate | titlecase}}</span>
              </div>
            </div>
            <div [ngClass]="!expandFalse ? 'my-2':''">
              <div *ngIf="!isSubmitted && viewState === 'attempt' && !expandFalse" class="flex flex-1">
                <ng-template *ngIf="fetchingQuestionsStatus === 'fetching'"
                  [ngTemplateOutlet]="showLoading"></ng-template>
                <div class="flex flex-wrap margin-right-s margin-left-s quest_num_box quest_num_box_mobile"
                  *ngIf="fetchingQuestionsStatus === 'done'">
                  <div class="col question-list-item" *ngFor="let question of secQuestions; let i = index">
                    <div (click)="scroll(i + 1)" [ngClass]="{
                     'marked-question-standalone marked-question-standalone-background': isQuestionMarked(question?.questionId),
                     'attempted-question attempted-question-background':
                       !isQuestionMarked(question?.questionId) &&
                       isQuestionAttempted(question?.questionId)               
                   }"
                      class="margin-side-8 not-visited-question not-visited-background flex justify-center items-center">
                      <div *ngIf="!isQuestionMarked(question?.questionId) &&
                       isQuestionAttempted(question?.questionId)"
                        [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'current-question-standalone': 'dark-border-standalone'">
                        {{ getQuestionIndex(i) }}
                      </div>
                      <div *ngIf="isQuestionMarked(question?.questionId) && !(!isQuestionMarked(question?.questionId) &&
                       isQuestionAttempted(question?.questionId))">{{ getQuestionIndex(i)
                       }}
                        <ng-container *ngIf="!isQuestionAttempted(question?.questionId)">{{ getQuestionIndex(i)
                          }}</ng-container>
                      </div>
                      <div *ngIf="!(!isQuestionMarked(question?.questionId) &&
                       isQuestionAttempted(question?.questionId)) && (!isQuestionMarked(question?.questionId))"
                        class="ovel-standalone question-number"
                        [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'current-question-standalone': 'dark-border-standalone'">
                        <span
                          [ngClass]="(currentQuestionIndex + 1) === getQuestionIndex(i) ? 'mat-body-2-bold': 'mat-body-2'">
                          {{ getQuestionIndex(i) }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <ng-container *ngIf="!expandFalse">
                <ng-container>
                  <div class="flex justify-end items-center mt-1 mb-4 gap-3 margin-right-s">
                    <mat-icon
                      [ngClass]="currentSetNumber <= 0 ? 'questions-navigate-disable' : 'questions-navigate-enable' "
                      (click)="currentSetNumber = currentSetNumber - 1">keyboard_arrow_left</mat-icon>
                    <mat-icon [ngClass]="hasNextSet ? 'questions-navigate-enable' : 'questions-navigate-disable' "
                      (click)="currentSetNumber = currentSetNumber + 1">keyboard_arrow_right</mat-icon>
                  </div>
                </ng-container>
                <div class="seperate-text-standalone">
                  <span>legend</span>
                </div>
                <div class="my-8 mx-6">
                  <div class="flex justify-between">
                    <div class="gap-4 flex flex-col">
                      <div class="flex gap-2">
                        <div class="flex justify-center items-center attempted-question-background question-guide">1
                        </div>
                        <div class="question-guide-text">Answered</div>
                      </div>
                      <div class="flex gap-2">
                        <div class="flex justify-center items-center question-guide marked-question-standalone-background">3</div>
                        <div class="question-guide-text">Marked</div>
                      </div>
                    </div>

                    <div class="gap-4 flex flex-col">
                      <div class="flex gap-2">
                        <div class="flex justify-center items-center question-guide not-answered-background">2</div>
                        <div class="question-guide-text">Not Answered</div>
                      </div>

                      <div class="flex gap-2">
                        <div class="flex justify-center items-center question-guide not-visited-background">4</div>
                        <div class="question-guide-text">Not Visited</div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>

            </div>
            <div class="exapnd-collapse-standalone">
              <div class="expand-icon-standalone" (click)="toggleExpandforMobile()">
                <mat-icon class="mat-icon notranslate material-icons mat-icon-no-color" role="img" aria-hidden="true">
                  <span *ngIf="expandFalse">arrow_downward</span>
                  <span *ngIf="!expandFalse">arrow_upward</span>
                </mat-icon>
              </div>
            </div>

          </div>
        </div>
        <div class="my-8">
          <div class="flex flex-1">
            <mat-progress-bar class="quiz-progress" [color]="secondary" [mode]="determinate"
              [value]="((currentQuestionIndex + 1)/totalQCount)*100" [bufferValue]="100">
            </mat-progress-bar>
          </div>
          <ng-container *ngIf="current_Question && !process">
            <viewer-question #questionsReference [id]="'question' + (currentQuestionIndex + 1)"
              [markedQuestions]="markedQuestions" [artifactUrl]="artifactUrl"
              [questionNumber]="currentQuestionIndex + 1" [total]="secQuestions.length" [viewState]="viewState"
              [question]="current_Question" [itemSelectedList]="questionAnswerHash[(current_Question?.questionId)]"
              [primaryCategory]="primaryCategory" (itemSelected)="fillSelectedItems(current_Question, $event)"
              [ePrimaryCategory]="ePrimaryCategory" [totalQCount]="totalQCount"
              (itemSelected)="fillSelectedItems(current_Question, $event)" [showAnswer]="showAnswer"
              [currentQuestion]="current_Question" [showOnlyQuestion]="false"
              [coursePrimaryCategory]="coursePrimaryCategory"
              [mobileQuestionSetExpand]="!expandFalse"
              [questionAnswerHash]="questionAnswerHash">
            </viewer-question>
          </ng-container>
          <!-- <div class="flex flex-1">
            <div class="flex flex-1 flex-row-reverse margin-right-m butto_box end">
              <ng-container
                *ngIf="!allSecAttempted.full && allSecAttempted.next && ((currentQuestionIndex+1) === totalQCount)">
                <button class="text-white ws-mat-primary-background margin-xs quest_btn" mat-raised-button
                  (click)="nextSection(allSecAttempted.next)" i18n="button quiz submit">
                  {{ 'practiceoverview.nextSection' | translate }}
                </button>
              </ng-container>
            </div>
          </div> -->
          <ng-template *ngIf="!(current_Question && !process)" [ngTemplateOutlet]="showLoading"></ng-template>
        </div>

      </div>
    </div>
    <div class="standalone-quiz-container-controls-mobile"
      *ngIf="fetchingQuestionsStatus === 'done' && viewState !== 'detail' && !(viewState === 'answer') && !isSubmitted">
      <div class="flex flex-col justify-between mt-4">
        <div class="flex">
          <div *ngIf="assessmentType !== 'optionWeightage'">
            <viewer-question #questionsReference [id]="'question' + (currentQuestionIndex + 1)"
              [markedQuestions]="markedQuestions" [artifactUrl]="artifactUrl"
              [questionNumber]="currentQuestionIndex + 1" [total]="secQuestions.length" [viewState]="viewState"
              [question]="current_Question" [itemSelectedList]="questionAnswerHash[(current_Question?.questionId)]"
              [primaryCategory]="primaryCategory" [ePrimaryCategory]="ePrimaryCategory" [totalQCount]="totalQCount"
              (itemSelected)="fillSelectedItems(current_Question, $event)" [showAnswer]="showAnswer"
              [currentQuestion]="current_Question" [coursePrimaryCategory]="coursePrimaryCategory"
              [showOnlyQuestion]="false" [showMarkForReview]="true"
              (getNextQuestion)="getNextQuestion(currentQuestionIndex + 1)">
            </viewer-question>
          </div>

        </div>
        <div class="flex" [ngClass]="assessmentType !== 'optionWeightage'? '': 'justify-right'">
          <div>
            <div class="flex flex-1 flex-row-reverse end">
              <ng-container
                *ngIf="!allSecAttempted.full && allSecAttempted.next && ((currentQuestionIndex+1) === totalQCount) && assessmentType !== 'optionWeightage'">
                <button class="text-white ws-mat-primary-background margin-xs quest_btn" mat-raised-button
                  (click)="nextSection(allSecAttempted.next)" i18n="button quiz submit">
                  {{ 'practiceoverview.nextSection' | translate }}
                </button>
              </ng-container>
              <a *ngIf="(currentQuestionIndex+1) !== totalQCount"
                class="text-white ws-mat-primary-background margin-xs quest_btn" mat-button
                (click)="getNextQuestion(currentQuestionIndex + 1)">
                <ng-container>Save & Next</ng-container>
              </a>
              &nbsp;&nbsp;
              <a *ngIf="currentQuestionIndex !== 0" class="ws-mat-accent-border margin-xs quest_btn prev" mat-button
                (click)="getNextQuestion(currentQuestionIndex - 1)">
                <ng-container>{{ 'playerbrief.previous' | translate }}</ng-container>
              </a>
            </div>
          </div>

        </div>
      </div>

    </div>
    <div id="quiz-end"></div>
    <ng-container *ngIf="isSubmitted && (viewState === 'answer' || viewState === 'review')">
      <viewer-result [quizCategory]="primaryCategory" [quizResponse]="finalResponse" [percentage]="result"
        [isPassed]="finalResponse?.pass" (userSelection)="action($event)" (fetchResult)="getQuizResult()"
        [coursePrimaryCategory]="coursePrimaryCategory">
      </viewer-result>
    </ng-container>
    <div *ngIf="viewState === 'detail'" class="flex flex-1 flex-column">
      <ng-container *ngIf="this.paperSections && this.paperSections?.length > 0">
        <div class="flex flex-1 flex-column margin-right-m margin-left-m main_practice_box">
          <div class="margin-m" *ngIf="fetchingSectionsStatus === 'fetching'">
            <div class="flex flex-center">
              <mat-spinner></mat-spinner>
            </div>
          </div>
          <div class="flex flex-1 flex-wrap margin-top-l">
            <ng-container *ngFor="let section of this.paperSections">
              <mat-card [ngClass]="getClass(section)"
                class="min-w assessment_card ws-mat-accent-border br-8 no-border margin-m">
                <mat-card-content class="cursor-pointer"
                  [class.spinner]="fetchingQuestionsStatus === 'fetching' && section.identifier === selectedSection.identifier"
                  [attr.disabled]="fetchingQuestionsStatus === 'fetching' && section.identifier === selectedSection.identifier"
                  (click)="startSection(section)">
                  <div class="flex flex-1 flex-column">
                    <span class="flex mat-subheading-1 text-truncate ">{{section.name || 'Section'}}</span>
                    <span class="flex mat-body-2">{{ 'practiceoverview.percentageToPass' | translate }} - <ng-container>
                        {{section.minimumPassPercentage}}
                      </ng-container></span>
                    <span class="flex mat-body-2">{{ 'practiceoverview.totalQuestions' | translate }} -
                      <ng-container>{{section?.maxQuestions ||
                        '0'}}
                      </ng-container></span>
                    <span [innerHtml]="formate(section.additionalInstructions)"></span>
                  </div>
                </mat-card-content>
              </mat-card>
            </ng-container>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
  <!-- Mobile Skeleton UI -->
  <div class="flex flex-row quiz-container-standalone"
    *ngIf="isMobile && fetchingQuestionsStatus !== 'done' && viewState !== 'initial' && !(viewState === 'answer') && !isSubmitted">
    <div class="flex flex-column">
      <div>
        <div class="flex flex-row justify-around align-end">
          <div>
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
            </span>
          </div>
          <div (click)="back()" class="no-border flex cursor-pointer back_button">
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'120px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
            </span>
          </div>
          <div class="timer" *ngIf="quizJson?.timeLimit">
            <span class="subheading-back">
              <ws-widget-skeleton-loader [width]="'120px'" [height]="'28px'"
                [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
            </span>
          </div>
        </div>
        <div class="flex flex-column justify-between align-center assessment-header">
          <div class="question-list">
            <div class="ques_stats_container">
              <div class="mb-24">
                <div class="flex flex-row justify-around">
                  <div class="flex flex-col align-center">
                    <div class="ques-count">
                      <ws-widget-skeleton-loader [width]="'24px'" [height]="'24px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                    </div>
                    <div class="stats-label">
                      <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                    </div>
                  </div>
                  <div class="flex flex-col align-center">
                    <div class="ques-count">
                      <ws-widget-skeleton-loader [width]="'24px'" [height]="'24px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                    </div>
                    <div class="stats-label">
                      <p> <ws-widget-skeleton-loader [width]="'86px'" [height]="'16px'"
                          [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="">
                <span><span>
                    <p> <ws-widget-skeleton-loader [width]="'386px'" [height]="'16px'"
                        [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
                  </span></span>
              </div>

            </div>

          </div>
          <div>

            <div *ngIf="!isSubmitted && viewState === 'attempt' && !expandFalse" class="flex flex-1">
              <ng-template *ngIf="fetchingQuestionsStatus === 'fetching'"
                [ngTemplateOutlet]="showLoading"></ng-template>
              <div class="flex flex-nowrap margin-right-s margin-left-s quest_num_box"
                *ngIf="fetchingQuestionsStatus === 'done'">
                <div class="col" *ngFor="let question of secQuestions; let i = index">
                  <div (click)="scroll(i + 1)" [ngClass]="{
                      'marked-question': isQuestionMarked(question?.questionId),
                      'attempted-question':
                        !isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId),
                      'white-border':
                        !isQuestionMarked(question?.questionId) &&
                        !isQuestionAttempted(question?.questionId) &&
                        currentTheme === 'black-theme',
                      'dark-border-standalone':
                        !isQuestionMarked(question?.questionId) &&
                        !isQuestionAttempted(question?.questionId) &&
                        currentTheme !== 'black-theme'
                    }" class="margin-xs">
                    <div *ngIf="!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)">
                      <mat-chip-list class="question-flag"><mat-chip
                          class="light-blue-small">&nbsp;&nbsp;&nbsp;&nbsp;</mat-chip></mat-chip-list>
                    </div>
                    <div *ngIf="isQuestionMarked(question?.questionId) && !(!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId))">
                      <mat-chip-list class="question-flag"><mat-chip class="orange-small">{{ i + 1
                          }}</mat-chip></mat-chip-list>
                    </div>
                    <div *ngIf="!(!isQuestionMarked(question?.questionId) &&
                        isQuestionAttempted(question?.questionId)) && (!isQuestionMarked(question?.questionId))"
                      class="ovel-standalone question-number"><span class="mat-body-2">
                        {{ i + 1 }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
        <div class="question_container flex flex-row">
          <div class="border-outline-skeleton">
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'180px'" [height]="'28px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                  </span></ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'320px'" [height]="'24px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader>
                  </span></ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'300px'" [height]="'56px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                </ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'300px'" [height]="'56px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                </ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'300px'" [height]="'56px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                </ng-container>
              </p>
            </div>
            <div class="flex flex-middle">
              <p class="margin-bottom-m">
                <ng-container i18n="question number label"><span class="subheading-1">
                    <ws-widget-skeleton-loader [width]="'300px'" [height]="'56px'"
                      [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></span>
                </ng-container>
              </p>
            </div>

          </div>

        </div>
      </div>

    </div>
    <div class="fixed-question-control">
      <div>
        <div class="flex flex-row justify-around">
          <p> <ws-widget-skeleton-loader [width]="'320px'" [height]="'32px'"
              [bindingClass]="'flex h-16'"></ws-widget-skeleton-loader></p>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<!-- Timer -->
<ng-template #timer>
  <div *ngIf="timeLeft" class="flex flex-1 flex-center">
    <img src="assets/icons/final-assessment/timer.svg">
    &nbsp;&nbsp;
    <ng-container *ngIf="quizJson.timeLimit >= 3600">
      <div *ngIf="timeLeft > 120">
        <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2H' }}</span>
      </div>
      <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
        <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2H' }}</span>
      </div>
    </ng-container>
    <ng-container *ngIf="quizJson.timeLimit < 3600">
      <div *ngIf="timeLeft > 120">
        <span class="time-title ws-mat-default-text"> {{ timeLeft | pipeDurationTransform: 'hms2M' }}</span>
      </div>
      <div *ngIf="timeLeft <= 120" class="ws-mat-red-text">
        <span class="time-title ws-mat-red-text"> {{ timeLeft | pipeDurationTransform: 'hms2M' }}</span>
      </div>
    </ng-container>
    <div *ngIf="isSubmitted" class="margin-left-xs mat-body-strong" i18n>
      <span class="time-title ws-mat-default-text"> (Submitted)</span>
    </div>
  </div>
</ng-template>

<!-- Indicator -->
<ng-template #indicator>
  <div class="margin-m">
    <div class="flex flex-end indicator_box">
      <span class="flex">
        <div class="sbox complete"></div>
        {{ 'practiceoverview.completed' | translate }}
      </span>
      <span class="flex">
        <div class="sbox incomplete"></div>
        {{ 'practiceoverview.incomplete' | translate }}
      </span>
      <span class="flex">
        <div class="sbox not-started"></div>
        {{ 'practiceoverview.notStarted' | translate }}
      </span>
      <span class="flex">
        <div class="sbox selected"></div>
        {{ 'practiceoverview.selected' | translate }}
      </span>
    </div>
  </div>
</ng-template>

<!-- Loader -->
<ng-template #showLoading>
  <div class="margin-m">
    <div class="flex flex-center">
      <mat-spinner></mat-spinner>
    </div>
  </div>
</ng-template>